<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>@WritersCafe208 — Q9 Fix-It Lab</title>

  <style>
    /* ===== Writers Café palette (soft, warm, readable) ===== */
    :root{
      --cream:#fbf6ef;
      --latte:#f2e6d8;
      --mocha:#3a2b23;
      --cocoa:#5a4236;
      --rose:#f7d6e6;
      --pink:#ff4fa3;
      --teal:#2fb7a3;
      --mint:#d9f4ef;
      --ink:#2b2420;
      --line:#e6d6c8;
      --shadow: 0 12px 30px rgba(58,43,35,.10);
      --radius:18px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--ink);
      background:
        radial-gradient(1200px 500px at 20% 0%, var(--rose), transparent 60%),
        radial-gradient(1200px 500px at 90% 10%, var(--mint), transparent 55%),
        linear-gradient(180deg, var(--cream), var(--latte));
      min-height:100vh;
    }

    header{
      padding:16px 18px;
      border-bottom:1px solid var(--line);
      background: rgba(251,246,239,.70);
      backdrop-filter: blur(6px);
      position: sticky;
      top:0;
      z-index:5;
    }

    .wrap{max-width:1200px;margin:0 auto}
    .brand{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
    }
    .pill{
      display:inline-flex; gap:8px; align-items:center;
      padding:10px 12px; border-radius:999px;
      border:1px solid var(--line);
      background:#fff;
      box-shadow: 0 6px 18px rgba(58,43,35,.06);
      font-weight:700;
    }
    .pill small{font-weight:600;color:rgba(43,36,32,.70)}
    .pill .dot{width:10px;height:10px;border-radius:50%;}
    .dot.pink{background:var(--pink)}
    .dot.teal{background:var(--teal)}

    main{padding:18px}
    .tabs{display:flex;gap:10px;flex-wrap:wrap;margin:12px 0 18px}
    .tabbtn{
      cursor:pointer;
      border:1px solid var(--line);
      background:#fff;
      padding:10px 12px;
      border-radius:14px;
      box-shadow: 0 8px 18px rgba(58,43,35,.07);
      font-weight:800;
      color:var(--mocha);
    }
    .tabbtn[aria-selected="true"]{
      outline: 2px solid rgba(255,79,163,.45);
      background: linear-gradient(180deg, #fff, rgba(247,214,230,.45));
    }

    .grid{display:grid;grid-template-columns:1.1fr .9fr;gap:16px}
    @media (max-width: 980px){.grid{grid-template-columns:1fr}}

    .card{
      background:#fff;
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:14px;
    }

    h2,h3{margin:6px 0 10px;color:var(--mocha)}
    p{margin:8px 0; line-height:1.45}
    .muted{color:rgba(43,36,32,.70)}
    .divider{height:1px;background:var(--line);margin:12px 0}

    .btn{
      cursor:pointer;
      border:1px solid var(--line);
      padding:10px 12px;
      border-radius:14px;
      background:#fff;
      font-weight:800;
      color:var(--mocha);
    }
    .btn.primary{
      border-color: rgba(47,183,163,.55);
      background: linear-gradient(180deg, #fff, rgba(47,183,163,.18));
    }
    .btn.pink{
      border-color: rgba(255,79,163,.55);
      background: linear-gradient(180deg, #fff, rgba(255,79,163,.16));
    }
    .btn:disabled{opacity:.6; cursor:not-allowed}

    .tag{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(242,230,216,.55);
      font-weight:800;
      color:var(--cocoa);
    }
    .status.ok{background: rgba(217,244,239,.9); border-color: rgba(47,183,163,.35)}
    .status.warn{background: rgba(247,214,230,.70); border-color: rgba(255,79,163,.30)}

    /* Drag items */
    .draggable{
      cursor:grab;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background: rgba(242,230,216,.35);
      box-shadow: 0 6px 12px rgba(58,43,35,.06);
      font-weight:750;
    }
    .draggable:active{cursor:grabbing}

    .choiceCard{
      border:1px solid var(--line);
      border-radius: 14px;
      background: rgba(217,244,239,.22);
      padding:10px 12px;
    }
    .choiceCard b{color:var(--mocha)}
    .choiceCard .mini{font-size:13px;color:rgba(43,36,32,.70);font-weight:650}

    .rationaleCard{
      border:1px solid var(--line);
      border-radius: 16px;
      padding:12px;
      background: linear-gradient(180deg, rgba(247,214,230,.50), rgba(217,244,239,.25));
    }
    .rationaleCard h4{margin:0 0 8px;color:var(--mocha)}
    .slot{
      margin-top:10px;
      min-height:48px;
      border-radius:14px;
      border:2px dashed rgba(58,43,35,.18);
      background: rgba(255,255,255,.65);
      padding:8px;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .slot .placeholder{
      color:rgba(43,36,32,.55);
      font-weight:700;
    }

    /* Activity 2 layout */
    .banks{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width: 980px){.banks{grid-template-columns:1fr}}
    .bank{
      border:1px solid var(--line);
      border-radius: 16px;
      padding:12px;
      background: rgba(242,230,216,.45);
    }
    .bankTitle{
      display:flex;align-items:center;gap:10px;margin-bottom:10px;
      font-weight:900;color:var(--mocha)
    }
    .badge{
      padding:6px 10px;border-radius:999px;
      background:#fff;border:1px solid var(--line);
      font-weight:900
    }
    .badge.cause{color:var(--pink)}
    .badge.effect{color:var(--teal)}

    .bankList{display:grid;gap:10px}

    .stepPanel{
      background: linear-gradient(180deg, rgba(255,255,255,.95), rgba(242,230,216,.45));
    }
    .step{
      border:1px solid var(--line);
      border-radius:16px;
      padding:12px;
      background:#fff;
      margin-bottom:12px;
    }
    .step h4{margin:0 0 6px;color:var(--mocha)}
    .step .directions{color:rgba(43,36,32,.75);font-weight:650}
    .dropRow{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
    @media (max-width: 980px){.dropRow{grid-template-columns:1fr}}
    .dropBox{
      min-height:54px;
      border-radius:16px;
      border:2px dashed rgba(58,43,35,.18);
      background: rgba(255,255,255,.75);
      padding:10px;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .dropBox .placeholder{font-weight:800;color:rgba(43,36,32,.55)}
    .dropLabel{
      display:inline-flex;gap:8px;align-items:center;
      font-weight:950;margin-bottom:8px;color:var(--mocha)
    }
    .dotSmall{width:10px;height:10px;border-radius:50%;}
    .dotSmall.pink{background:var(--pink)}
    .dotSmall.teal{background:var(--teal)}

    .stemBlock{
      border-left: 6px solid rgba(255,79,163,.55);
      background: rgba(247,214,230,.35);
      border-radius:14px;
      padding:10px 12px;
      font-weight:800;
      color:rgba(58,43,35,.88);
      margin-top:10px;
    }
    .stemBlock.teal{
      border-left-color: rgba(47,183,163,.55);
      background: rgba(217,244,239,.35);
    }

    textarea{
      width:100%;
      min-height:90px;
      border-radius:16px;
      border:1px solid var(--line);
      padding:10px 12px;
      font-size:15px;
      background: rgba(255,255,255,.92);
      color:var(--ink);
      resize:vertical;
    }

    .hidden{display:none}
  </style>
</head>

<body>
<header>
  <div class="wrap brand">
    <span class="pill">☕ <b>@WritersCafe208</b> <small>Q9 Fix-It Lab</small></span>
    <span class="pill"><span class="dot teal"></span> Goal: <small>Repair thinking (not redo the hunt)</small></span>
    <span class="pill"><span class="dot pink"></span> Time: <small>10–15 min</small></span>
  </div>
</header>

<main class="wrap">
  <div class="tabs" role="tablist" aria-label="Activities">
    <button class="tabbtn" role="tab" aria-selected="true" aria-controls="tab1" id="t1">Activity 1 — Drag Answers into Rationale Cards</button>
    <button class="tabbtn" role="tab" aria-selected="false" aria-controls="tab2" id="t2">Activity 2 — Cause Bank + Effect Bank → Topic</button>
  </div>

  <!-- ===================== TAB 1 ===================== -->
  <section id="tab1" role="tabpanel" aria-labelledby="t1">
    <div class="grid">
      <div class="card">
        <h2>Benchmark Question (Q9)</h2>
        <p><b>How does the use of a cause-and-effect structure in paragraphs 2–3</b> help support the topic of the article?</p>

        <div class="divider"></div>
        <h3>Answer Choices (Drag these)</h3>
        <p class="muted">Drag each choice into the rationale card that best explains it.</p>

        <div id="answerDeck" class="bankList"></div>

        <div class="divider"></div>
        <div class="muted"><b>Tip:</b> We’re not asking “Which answer sounds nice?” We’re asking “Which answer matches what the <i>structure</i> is doing?”</div>
      </div>

      <div class="card">
        <h2>Rationale Cards (Drop Zones)</h2>
        <p class="muted">Each card already has the reasoning. Your job is to match the answer choice to the right rationale.</p>

        <div id="rationaleCards" class="bankList"></div>

        <div class="divider"></div>
        <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
          <button class="btn primary" id="checkTab1">Check Matches</button>
          <button class="btn" id="resetTab1">Reset</button>
          <span id="statusTab1" class="tag status warn">Not checked yet</span>
        </div>
      </div>
    </div>
  </section>

  <!-- ===================== TAB 2 ===================== -->
  <section id="tab2" role="tabpanel" aria-labelledby="t2" class="hidden">
    <div class="grid">
      <!-- Left: banks -->
      <div class="card">
        <h2>Cause Bank + Effect Bank</h2>
        <p class="muted">Drag a cause and an effect into Box 1. Then do it again for Box 2. After that, combine both into one final statement that answers Q9.</p>

        <div class="banks">
          <div class="bank">
            <div class="bankTitle"><span class="badge cause">CAUSE</span> Choose a reason / why</div>
            <div class="bankList" id="causeBank"></div>
          </div>

          <div class="bank">
            <div class="bankTitle"><span class="badge effect">EFFECT</span> Choose a result / what happened</div>
            <div class="bankList" id="effectBank"></div>
          </div>
        </div>
      </div>

      <!-- Right: directions + boxes -->
      <div class="card stepPanel">
        <h2>Build the Reasoning (2 Boxes → 1 Answer)</h2>

        <!-- Box 1 -->
        <div class="step">
          <h4>Box 1</h4>
          <div class="directions">1) Drag a <b>CAUSE</b> into the cause box. 2) Drag an <b>EFFECT</b> into the effect box. 3) Explain how this cause/effect helps clarify the topic of <b>community artwork</b>.</div>

          <div class="dropRow">
            <div>
              <div class="dropLabel"><span class="dotSmall pink"></span> Drag a CAUSE here</div>
              <div class="dropBox" id="b1Cause"><span class="placeholder">Drop CAUSE</span></div>
            </div>
            <div>
              <div class="dropLabel"><span class="dotSmall teal"></span> Drag an EFFECT here</div>
              <div class="dropBox" id="b1Effect"><span class="placeholder">Drop EFFECT</span></div>
            </div>
          </div>

          <div class="stemBlock">
            <div><b>Sentence stem (use this to write):</b></div>
            <div>Because <u>__________</u>, the result is <u>__________</u>. This supports the topic of community artwork because <u>__________</u>.</div>
          </div>

          <textarea id="b1Explain" aria-label="Box 1 explanation"></textarea>
        </div>

        <!-- Box 2 -->
        <div class="step">
          <h4>Box 2</h4>
          <div class="directions">Pick a <b>different</b> cause and effect. Explain how this second relationship also clarifies the topic of community artwork.</div>

          <div class="dropRow">
            <div>
              <div class="dropLabel"><span class="dotSmall pink"></span> Drag a CAUSE here</div>
              <div class="dropBox" id="b2Cause"><span class="placeholder">Drop CAUSE</span></div>
            </div>
            <div>
              <div class="dropLabel"><span class="dotSmall teal"></span> Drag an EFFECT here</div>
              <div class="dropBox" id="b2Effect"><span class="placeholder">Drop EFFECT</span></div>
            </div>
          </div>

          <div class="stemBlock teal">
            <div><b>Sentence stem (use this to write):</b></div>
            <div>Another cause is <u>__________</u>, which led to <u>__________</u>. This reinforces the topic of community artwork by showing <u>__________</u>.</div>
          </div>

          <textarea id="b2Explain" aria-label="Box 2 explanation"></textarea>
        </div>

        <!-- Final synthesis -->
        <div class="step">
          <h4>Final: One statement that answers Q9</h4>
          <div class="directions"><b>Combine Box 1 + Box 2</b> into one strong statement:</div>

          <div class="stemBlock">
            <div><b>Sentence stem (final answer):</b></div>
            <div>The author’s use of cause-and-effect structure supports the topic of community artwork by showing that <u>__________</u>, which led to <u>__________</u>.</div>
          </div>

          <textarea id="finalAnswer" aria-label="Final synthesis answer"></textarea>

          <div class="divider"></div>
          <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
            <button class="btn primary" id="selfCheck">Self-Check</button>
            <button class="btn" id="resetTab2">Reset Activity</button>
            <span id="statusTab2" class="tag status warn">Not checked yet</span>
          </div>

          <p class="muted" id="selfNote"></p>
        </div>
      </div>
    </div>
  </section>
</main>

<script>
/* ===================== Tabs ===================== */
const tabs = [
  {btn: document.getElementById('t1'), panel: document.getElementById('tab1')},
  {btn: document.getElementById('t2'), panel: document.getElementById('tab2')},
];
tabs.forEach((t, idx) => {
  t.btn.addEventListener('click', () => {
    tabs.forEach((x, i) => {
      x.btn.setAttribute('aria-selected', i === idx ? 'true' : 'false');
      x.panel.classList.toggle('hidden', i !== idx);
    });
  });
});

/* ===================== Helpers ===================== */
function setStatus(id, text, ok=false){
  const el = document.getElementById(id);
  el.textContent = text;
  el.classList.remove('ok','warn');
  el.classList.add(ok ? 'ok' : 'warn');
}

/* ===================== Activity 1 — Drag answers into rationale cards ===================== */
const answers = [
  {id:'A', text:'It shows that the people of the city have a deep appreciation for their culture and history.'},
  {id:'B', text:'It demonstrates why people from the community were willing to share their stories.'},
  {id:'C', text:'It emphasizes the importance of the materials used by the artist to build the sculpture.'},
  {id:'D', text:'It explains why the artist was inspired to create the sculpture in the way that she did.'},
];

// Each card wants exactly one answer id.
const rationaleCardsData = [
  {
    id:'card1',
    title:'“True-sounding, but NOT what this question asks.”',
    rationale:'This answer may sound true about the article, but it does not explain how the cause-and-effect structure in paragraphs 2–3 supports the topic.',
    correct:'A'
  },
  {
    id:'card2',
    title:'“Wrong focus.”',
    rationale:'This answer focuses on the community’s reasons (their motivation) instead of the artist’s inspiration and design choices, which is what the structure explains here.',
    correct:'B'
  },
  {
    id:'card3',
    title:'“Detail distraction.”',
    rationale:'This answer shifts attention to materials. Paragraphs 2–3 use cause/effect to explain reasons and inspiration, not construction supplies.',
    correct:'C'
  },
  {
    id:'card4',
    title:'✅ “Matches structure + topic.”',
    rationale:'Correct: the cause-and-effect structure explains what the artist saw/understood and how that led her to create the sculpture in a specific way.',
    correct:'D'
  },
];

const answerDeck = document.getElementById('answerDeck');
const rationaleCards = document.getElementById('rationaleCards');

function makeAnswerChip(a){
  const d = document.createElement('div');
  d.className = 'draggable';
  d.draggable = true;
  d.id = 'ans_' + a.id;
  d.dataset.answerId = a.id;
  d.innerHTML = `<b>${a.id}.</b> ${a.text}`;
  d.addEventListener('dragstart', (e)=> {
    e.dataTransfer.setData('text/plain', d.id);
  });
  return d;
}

function makeRationaleCard(c){
  const wrap = document.createElement('div');
  wrap.className = 'rationaleCard';
  wrap.innerHTML = `
    <h4>${c.title}</h4>
    <div class="muted">${c.rationale}</div>
    <div class="slot" data-correct="${c.correct}">
      <span class="placeholder">Drop the matching answer choice here</span>
    </div>
  `;
  const slot = wrap.querySelector('.slot');

  slot.addEventListener('dragover', e => e.preventDefault());
  slot.addEventListener('drop', e => {
    e.preventDefault();
    const id = e.dataTransfer.getData('text/plain');
    const chip = document.getElementById(id);
    if(!chip) return;

    // keep only 1 chip per slot; send existing back to deck
    const existing = slot.querySelector('.draggable');
    if(existing) answerDeck.appendChild(existing);

    // remove placeholder if present
    const ph = slot.querySelector('.placeholder');
    if(ph) ph.remove();

    slot.appendChild(chip);
  });

  return wrap;
}

function resetTab1(){
  answerDeck.innerHTML = '';
  rationaleCards.innerHTML = '';
  answers.forEach(a => answerDeck.appendChild(makeAnswerChip(a)));
  rationaleCardsData.forEach(c => rationaleCards.appendChild(makeRationaleCard(c)));
  setStatus('statusTab1', 'Not checked yet', false);
}

document.getElementById('checkTab1').addEventListener('click', () => {
  const slots = rationaleCards.querySelectorAll('.slot');
  let correctCount = 0;
  slots.forEach(s => {
    const chip = s.querySelector('.draggable');
    const correct = s.dataset.correct;
    if(chip && chip.dataset.answerId === correct) correctCount++;
  });
  if(correctCount === slots.length){
    setStatus('statusTab1', 'Perfect — you matched every rationale.', true);
  } else {
    setStatus('statusTab1', `${correctCount}/${slots.length} correct — adjust the mismatches.`, false);
  }
});

document.getElementById('resetTab1').addEventListener('click', resetTab1);
resetTab1();

/* ===================== Activity 2 — Cause bank + Effect bank ===================== */
/* Note: These are “idea strips” (fast practice). You can swap them later with exact sentences if you want. */
const causes = [
  {id:'c1', text:'The artist noticed difficult conditions affecting some Hispanic communities.'},
  {id:'c2', text:'She wanted to create public art that reflects love and respect for the people.'},
  {id:'c3', text:'She wanted to celebrate San Antonio’s history from the point of view of the people who lived it.'},
  {id:'c4', text:'She invited community members to share stories and cultural experiences.'}
];

const effects = [
  {id:'e1', text:'She led public chats where community members shared family histories and cultures.'},
  {id:'e2', text:'Those stories became designs that represented many cultures and lifestyles.'},
  {id:'e3', text:'The sculptures were created in a way meant to include many voices and identities.'},
  {id:'e4', text:'The final artwork represented community experiences through a shared public project.'}
];

const causeBank = document.getElementById('causeBank');
const effectBank = document.getElementById('effectBank');

function makeStrip(item, type){
  const d = document.createElement('div');
  d.className = 'draggable';
  d.draggable = true;
  d.id = `${type}_${item.id}`;
  d.dataset.type = type;     // 'cause' or 'effect'
  d.dataset.itemId = item.id;
  d.textContent = item.text;
  d.addEventListener('dragstart', (e)=> {
    e.dataTransfer.setData('text/plain', d.id);
  });
  return d;
}

function setDropBox(boxEl, expectedType){
  boxEl.addEventListener('dragover', e => e.preventDefault());
  boxEl.addEventListener('drop', e => {
    e.preventDefault();
    const id = e.dataTransfer.getData('text/plain');
    const strip = document.getElementById(id);
    if(!strip) return;

    if(strip.dataset.type !== expectedType){
      setStatus('statusTab2', `That was a ${strip.dataset.type.toUpperCase()}. Drop a ${expectedType.toUpperCase()} here.`, false);
      return;
    }

    // Only one strip per drop box
    const existing = boxEl.querySelector('.draggable');
    if(existing){
      // send it back to the correct bank
      (existing.dataset.type === 'cause' ? causeBank : effectBank).appendChild(existing);
    }

    const ph = boxEl.querySelector('.placeholder');
    if(ph) ph.remove();

    boxEl.appendChild(strip);
    setStatus('statusTab2', 'Good pick. Keep going.', true);
  });
}

setDropBox(document.getElementById('b1Cause'), 'cause');
setDropBox(document.getElementById('b1Effect'), 'effect');
setDropBox(document.getElementById('b2Cause'), 'cause');
setDropBox(document.getElementById('b2Effect'), 'effect');

function resetTab2(){
  // clear banks
  causeBank.innerHTML = '';
  effectBank.innerHTML = '';
  causes.forEach(c => causeBank.appendChild(makeStrip(c,'cause')));
  effects.forEach(e => effectBank.appendChild(makeStrip(e,'effect')));

  // clear drop boxes + restore placeholders
  const drops = [
    {id:'b1Cause', label:'Drop CAUSE'},
    {id:'b1Effect', label:'Drop EFFECT'},
    {id:'b2Cause', label:'Drop CAUSE'},
    {id:'b2Effect', label:'Drop EFFECT'},
  ];
  drops.forEach(d => {
    const el = document.getElementById(d.id);
    // Move any strip currently inside back to its bank
    const strip = el.querySelector('.draggable');
    if(strip) (strip.dataset.type === 'cause' ? causeBank : effectBank).appendChild(strip);
    el.innerHTML = `<span class="placeholder">${d.label}</span>`;
  });

  document.getElementById('b1Explain').value = '';
  document.getElementById('b2Explain').value = '';
  document.getElementById('finalAnswer').value = '';
  document.getElementById('selfNote').textContent = '';
  setStatus('statusTab2', 'Not checked yet', false);
}

document.getElementById('resetTab2').addEventListener('click', resetTab2);
resetTab2();

document.getElementById('selfCheck').addEventListener('click', () => {
  const final = (document.getElementById('finalAnswer').value || '').toLowerCase();
  const note = document.getElementById('selfNote');

  // Heuristic: student should reference WHY + artist + created/design/structure
  const hasWhy = final.includes('why') || final.includes('because') || final.includes('so');
  const hasArtist = final.includes('artist');
  const hasSupport = final.includes('support') || final.includes('helps') || final.includes('clarif');
  const hasTopic = final.includes('community') || final.includes('artwork') || final.includes('public art');

  if(hasWhy && hasArtist && hasTopic){
    setStatus('statusTab2', 'Looks aligned — your answer connects cause→effect to the artist’s inspiration.', true);
    note.textContent = "✅ Check: does your sentence explain how cause-and-effect shows WHY the artist created the work this way (not materials, not just culture)?";
  } else {
    setStatus('statusTab2', 'Almost — re-center on WHY the artist created it this way.', false);
    note.textContent = "⚠️ Add the missing piece: mention WHY (cause) → what happened (effect) → how that supports the topic of community artwork.";
  }
});
</script>
</body>
</html>
